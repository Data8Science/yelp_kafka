[tox]
envlist = py26, py27
indexserver =
    default = https://pypi.yelpcorp.com/simple/

[testenv]
deps =
    flake8
    pytest
    mock
commands =
    py.test -s {posargs}
    flake8 .

[testenv:coverage]
deps =
    flake8
    pytest
    mock
    coverage
commands =
    coverage run --source +package+/,tests/ -m pytest --strict {posargs}
    coverage report -m
    flake8 .

[testenv:docs]
deps =
    sphinx
    sphinx_rtd_theme
changedir = docs
commands = sphinx-build -b html -d build/doctrees source build/html
    
[flake8]
exclude = .svn,CVS,.bzr,.hg,.git,__pycache__,.tox,docs,virtualenv_run
ignore = E501

[pytest]
norecursedirs = .* _darcs CVS docs virtualenv_run
